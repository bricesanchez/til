<!DOCTYPE html><html><head><meta charset="utf-8" /><title>In React setState is not "guaranteed" to be synchronous. â€” Today Icelab Learnt</title><link href="/assets/public.css" rel="stylesheet" type="text/css" /><script src="/assets/public.js" type="text/javascript"></script></head><body><h1><a href="/">Today Icelab Learnt</a></h1><h1>In React setState is not "guaranteed" to be synchronous.</h1><div class="content" data-view-highlight=""><p>I discovered recently that if you do something link this in react:</p>

<pre><code class="javascript">this.setState(reallyUseful: true);

if (this.state.reallyUseful) {
  this.doSomethingAmazing();
}
</code></pre>

<p>&hellip; it&rsquo;s not very useful and more often than not nothing amazing happens, just confusion and sadness.</p>

<p>This is because <code>setState</code> it turns out, is asynchronous. Of course most of the time you are doing your amazing things in your render function so everything is sweet but on the odd occasion that you need to pass that value elsewhere, eg: publishing an event, beware!</p>

<p>From the docs:</p>

<blockquote>
<p>setState() does not immediately mutate this.state but creates a pending state transition. Accessing this.state after calling this method can potentially return the existing value.<br>
There is no guarantee of synchronous operation of calls to setState and calls may be batched for performance gains.</p>
</blockquote>

<p>Read about <code>setState</code> here: <a href="https://facebook.github.io/react/docs/component-api.html">https://facebook.github.io/react/docs/component-api.html</a></p>
</div><div class="tags"><a href="/tags/react">react</a>, <a href="/tags/js">js</a></div><div class="tags"><h2>All tags</h2><a href="/tags/react">react</a><a href="/tags/js">js</a><a href="/tags/ruby">ruby</a><a href="/tags/aws">aws</a><a href="/tags/accessibility">accessibility</a><a href="/tags/social">social</a><a href="/tags/performance">performance</a><a href="/tags/git">git</a><a href="/tags/css">css</a><a href="/tags/rails">rails</a><a href="/tags/slim">slim</a><a href="/tags/seo">seo</a><a href="/tags/postgres">postgres</a><a href="/tags/debugging">debugging</a><a href="/tags/testing">testing</a><a href="/tags/processing">processing</a></div></body></html>